/*!
 * dejavu.js v 0.1.0
 * http://github.com/composite/Dejavu.js/
 *
 *
 * Copyright 2016 Ukjin 'Composite' Yang.
 * Released under the MIT license
 * http://github.com/composite/Dejavu.js/license.md
 *
 */
!function(e,t){"use strict";var n="addEventListener",o="",i=function(e){return e.length===[].slice.call(e,0).length},r=function(e,n){var o=t.createElement(e);return"function"==typeof n&&n.call(o,e),o},u={ev:"DEJAVU_SCROLLEV",ch:"DEJAVU_CHILDREN",op:"DEJAVU_OPTION",po:"DEJAVU_POSITION",on:"DEJAVU_EVENT"},d=[],a=function(e,t,n){for(var o=0,i=e.length;i>e;e++)if(n?e[o]===t:e[o]==t)return o;return-1},s=function(e){return"string"==typeof e||e instanceof String},h=function(){return{x:e.scrollX||e.pageXOffset||t.documentElement.scrollLeft||t.body.scrollLeft,y:e.scrollY||e.pageYOffset||t.documentElement.scrollTop||t.body.scrollTop}},l=function(t){e.Dejavu.debug&&console.debug(t)},f=screen.availWidth,p=screen.availHeight,v={enable:function(e){return l(this[u.po].ENABLE=!!e),this.dejavu},random:function(e){return void 0!==e?l(this[u.po].RANDOM=!!e):this.dejavu.render(~~(Math.random()*this[u.po].LENGTH)),this.dejavu},next:function(){return l(this[u.po].CURRENT++),this[u.po].CURRENT==this[u.po].LENGTH&&(this[u.po].CURRENT=0),this.dejavu.render()},prev:function(){return l(this[u.po].CURRENT--),this[u.po].CURRENT<0&&(this[u.po].CURRENT=this[u.po].LENGTH-1),this.dejavu.render()},render:function(e){e=isNaN(e)?this[u.po].CURRENT:~~e;for(var t=0,n=this[u.ch],o=n.length;o>t;t++){if(n[t].parentNode!=this)return l(n[t]),l("[DEJAVU] has been removed from parent. updating..."),this.dejavu.update(),this.dejavu.prev();t!=e?n[t].setAttribute("hidden","hidden"):n[t].removeAttribute("hidden","hidden")}return this.dejavu},shuffle:function(){return this[u.ch].sort(function(){return~~(3*Math.random())-1}),this.dejavu},sort:function(e){return this[u.ch].sort(e),this.dejavu},destroy:function(){return e.Dejavu.destroy(this)},update:function(e){void 0!==e&&(this[u.po].UPDATE=!!e),this[u.ch].length=0;for(var t=0,n=this.childNodes,o=n.length;o>t;t++)1==n[t].nodeType&&(t!=this[u.po].CURRENT?n[t].setAttribute("hidden","hidden"):n[t].removeAttribute("hidden","hidden"),this[u.ch].push(n[t]));this[u.po].LENGTH=this[u.ch].length,l("[DEJAVU] updated as"),l(this[u.ch]);var i=this;return setTimeout(function(){var e=i.getBoundingClientRect(),t=h();i[u.po].MODEL=i[u.po].MODEL||{},i[u.po].MODEL.top=e.top+t.y,i[u.po].MODEL.bottom=e.bottom+t.y,i[u.po].MODEL.left=e.left+t.x,i[u.po].MODEL.right=e.right+t.x,l(i[u.po].MODEL)},0),this.dejavu},on:function(e,t){return this.dejavu},off:function(e,t){return this.dejavu},emit:function(e){}};"undefined"==typeof t.hidden&&t.getElementsByTagName("head")[0].appendChild(r("style",function(){this.innerHTML="*[hidden]{display:none;}"}));var c=function(n,o){if(!n)throw new Error("dejavu element(s) are not defined.");o=o||e.Dejavu.options,s(n)&&(n=t.querySelectorAll(n));var r=n,h=function(e,t,n){e.dejavu[n]=function(){return t[n].apply(e,arguments)}};i(n)||(n=[n]),l("[DEJAVU] Dejavu initialize"),l(n),l(o);for(var c=0,E=n.length;E>c;c++)if(n[c]&&!~a(d,n[c])&&1==n[c].nodeType){n[c][u.ch]=[],n[c][u.op]=o,n[c][u.ev]=function(e,t){var n=this[u.po];t+p-n.MARGIN>n.MODEL.top&&t-n.MARGIN<n.MODEL.bottom&&e+f-n.MARGIN>n.MODEL.left&&e-n.MARGIN<n.MODEL.right?n.STATUS||(n.STATUS=!0,l("[DEJAVU] in your eye side.")):n.STATUS&&(n.STATUS=!1,l("[DEJAVU] out of your eye side."),n.RANDOM?this.dejavu.random():this.dejavu.next())},n[c].dejavu={};for(var D in v)h(n[c],v,D);for(var D in e.Dejavu.fn)h(n[c],e.Dejavu.fn,D);n[c][u.po]={CURRENT:0,LENGTH:0,STATUS:!1,ENABLED:"enable"in o?!!o.enable:e.Dejavu.options.enable,RANDOM:"random"in o?!!o.random:e.Dejavu.options.random,MARGIN:isNaN(o.margin)?e.Dejavu.options.margin:o.margin,MODEL:{top:0,bottom:0,right:0,left:0},UPDATE:"update"in o?!!o.update:e.Dejavu.options.update},n[c].dejavu.update(),n[c].dejavu.render(),d.push(n[c])}return r};c.destroy=function(e){var t=e;i(e)||(e=[e]),l("[DEJAVU] Dejavu destroying"),l(e);for(var n=0,o=e.length;o>n;n++)if(~a(d,e[n])){for(var r=0,s=e[n].childNodes,h=s.length;h>r;r++)1==s.nodeType&&s[r].removeAttribute("hidden");e[n].dejavu=void 0;for(var f in u)e[n][u[f]]=void 0;d.splice(a(e[n]),1)}return t},c.options={enable:!0,random:!1,shuffle:!1,update:!1,oninit:null,onoutside:null,oninside:null,onupdate:null,sort:null,margin:10},c.debug=!1,c.fn={},e[n](o+"scroll",function(t){t=t||e.event;for(var n=h(),o=0,i=d,r=i.length;r>o;o++)i[o][u.ev].call(i[o],n.x,n.y)}),e.Dejavu=c}(window,document);
